import{j as e,d as T,c as Q,u as U,q as Y,e as Z,a3 as ee,a4 as se}from"./ui-vendor-D2IXE4bY.js";import{r as n,u as ae}from"./react-vendor-XYDEKuIS.js";import{g as N,i as R,u as te,C as g,e as v,A as re,E as ie,F as ne,B as x,f as y,n as oe,b as S,c as M,U as ce,d as O,X as le,k as de,l as me,p as he,s as ue,o as pe}from"./index-0hnW3E_C.js";import{I as A,L as j}from"./label-DZSOZ5Rh.js";import{h as I,b as xe}from"./haptic-feedback-C7ikSRXG.js";import{C as fe,M as je}from"./map-pin-0Y2TFa7U.js";import{S as Ne}from"./save-CAQ3HTEe.js";import"./supabase-vendor-DBhEyip2.js";import"./chart-vendor-CZvqwiTC.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=N("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=N("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=N("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=N("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=N("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=N("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=N("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=N("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var Ce="Separator",B="horizontal",Se=["horizontal","vertical"],D=n.forwardRef((i,a)=>{const{decorative:s,orientation:o=B,...c}=i,l=Me(o)?o:B,u=s?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return e.jsx(T.div,{"data-orientation":l,...u,...c,ref:a})});D.displayName=Ce;function Me(i){return Se.includes(i)}var H=D;const L=n.forwardRef(({className:i,orientation:a="horizontal",decorative:s=!0,...o},c)=>e.jsx(H,{ref:c,decorative:s,orientation:a,className:R("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",i),...o}));L.displayName=H.displayName;var z="Switch",[Pe,De]=Q(z),[Ee,Ae]=Pe(z),q=n.forwardRef((i,a)=>{const{__scopeSwitch:s,name:o,checked:c,defaultChecked:l,required:h,disabled:u,value:f="on",onCheckedChange:d,form:m,...r}=i,[p,w]=n.useState(null),b=U(a,E=>w(E)),k=n.useRef(!1),C=p?m||!!p.closest("form"):!0,[t,_]=Y({prop:c,defaultProp:l??!1,onChange:d,caller:z});return e.jsxs(Ee,{scope:s,checked:t,disabled:u,children:[e.jsx(T.button,{type:"button",role:"switch","aria-checked":t,"aria-required":h,"data-state":W(t),"data-disabled":u?"":void 0,disabled:u,value:f,...r,ref:b,onClick:Z(i.onClick,E=>{_(K=>!K),C&&(k.current=E.isPropagationStopped(),k.current||E.stopPropagation())})}),C&&e.jsx($,{control:p,bubbles:!k.current,name:o,value:f,checked:t,required:h,disabled:u,form:m,style:{transform:"translateX(-100%)"}})]})});q.displayName=z;var G="SwitchThumb",V=n.forwardRef((i,a)=>{const{__scopeSwitch:s,...o}=i,c=Ae(G,s);return e.jsx(T.span,{"data-state":W(c.checked),"data-disabled":c.disabled?"":void 0,...o,ref:a})});V.displayName=G;var ze="SwitchBubbleInput",$=n.forwardRef(({__scopeSwitch:i,control:a,checked:s,bubbles:o=!0,...c},l)=>{const h=n.useRef(null),u=U(h,l),f=ee(s),d=se(a);return n.useEffect(()=>{const m=h.current;if(!m)return;const r=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(r,"checked").set;if(f!==s&&w){const b=new Event("click",{bubbles:o});w.call(m,s),m.dispatchEvent(b)}},[f,s,o]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...c,tabIndex:-1,ref:u,style:{...c.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});$.displayName=ze;function W(i){return i?"checked":"unchecked"}var J=q,_e=V;const P=n.forwardRef(({className:i,...a},s)=>e.jsx(J,{className:R("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",i),...a,ref:s,children:e.jsx(_e,{className:R("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));P.displayName=J.displayName;function He(){var C;const i=ae(),{user:a,profile:s,signOut:o,refreshProfile:c}=te(),[l,h]=n.useState(!1),[u,f]=n.useState(!1),[d,m]=n.useState({notifications:!0,emailNotifications:!0,pushNotifications:!1,darkMode:!1,language:"fr"}),[r,p]=n.useState({fullName:(s==null?void 0:s.full_name)||"",email:(a==null?void 0:a.email)||"",phone:"",address:""});n.useEffect(()=>{s&&p({fullName:s.full_name||"",email:(a==null?void 0:a.email)||"",phone:s.phone||"",address:s.address||""})},[s,a]);const w=async()=>{if(a){f(!0);try{const{error:t}=await ue.from("profiles").update({full_name:r.fullName,phone:r.phone||null,address:r.address||null,updated_at:new Date().toISOString()}).eq("id",a.id);if(t)throw t;await c(),h(!1),xe(),y.success("Profil mis à jour avec succès")}catch(t){console.error("Error updating profile:",t),y.error("Erreur lors de la mise à jour du profil")}finally{f(!1)}}},b=async()=>{I(),await o(),i("/auth")},k=t=>t.split(" ").map(_=>_[0]).join("").toUpperCase().slice(0,2);return a?e.jsxs("div",{className:"content-area space-y-6 pb-20",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 via-primary/10 to-transparent rounded-3xl -z-10"}),e.jsx(g,{className:"border-0 shadow-lg bg-gradient-to-br from-card to-card/95",children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(re,{className:"h-24 w-24 border-4 border-background shadow-lg",children:[e.jsx(ie,{src:s==null?void 0:s.avatar_url,alt:r.fullName}),e.jsx(ne,{className:"bg-gradient-to-br from-primary to-primary/80 text-2xl font-bold text-primary-foreground",children:k(r.fullName||a.email||"U")})]}),l&&e.jsx(x,{size:"icon",className:"absolute bottom-0 right-0 h-8 w-8 rounded-full bg-primary shadow-lg",onClick:()=>{y.info("Upload de photo à venir")},children:e.jsx(fe,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex-1",children:[l?e.jsx(A,{value:r.fullName,onChange:t=>p({...r,fullName:t.target.value}),className:"text-xl font-bold mb-1",placeholder:"Nom complet"}):e.jsx("h1",{className:"text-2xl font-display font-bold text-foreground mb-1",children:r.fullName||((C=a.email)==null?void 0:C.split("@")[0])||"Utilisateur"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a.email}),e.jsx(oe,{variant:"secondary",className:"bg-primary/10 text-primary border-primary/20",children:(s==null?void 0:s.subscription_tier)==="premium"?"Premium":"Gratuit"})]})]})})})]}),e.jsxs(g,{className:"shadow-md",children:[e.jsxs(S,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5 text-primary"}),"Informations personnelles"]}),e.jsx(O,{children:"Gérez vos informations de profil"})]}),l?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>{h(!1),I()},children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx(x,{size:"icon",onClick:w,disabled:u,children:e.jsx(Ne,{className:"h-4 w-4"})})]}):e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>{h(!0),I()},children:e.jsx(be,{className:"h-4 w-4"})})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4 text-muted-foreground"}),"Email"]}),e.jsx(A,{id:"email",value:r.email,disabled:!0,className:"bg-muted"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"L'email ne peut pas être modifié"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4 text-muted-foreground"}),"Téléphone"]}),l?e.jsx(A,{id:"phone",value:r.phone,onChange:t=>p({...r,phone:t.target.value}),placeholder:"+225 XX XX XX XX XX"}):e.jsx("p",{className:"text-sm text-foreground py-2",children:r.phone||"Non renseigné"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{htmlFor:"address",className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4 text-muted-foreground"}),"Adresse"]}),l?e.jsx(A,{id:"address",value:r.address,onChange:t=>p({...r,address:t.target.value}),placeholder:"Votre adresse"}):e.jsx("p",{className:"text-sm text-foreground py-2",children:r.address||"Non renseigné"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4 text-muted-foreground"}),"Membre depuis"]}),e.jsx("p",{className:"text-sm text-foreground py-2",children:a.created_at?me(new Date(a.created_at),"d MMMM yyyy",{locale:pe}):"Date inconnue"})]})]})]}),e.jsxs(g,{className:"shadow-md",children:[e.jsxs(S,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5 text-primary"}),"Notifications"]}),e.jsx(O,{children:"Gérez vos préférences de notification"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(j,{htmlFor:"notifications",children:"Notifications générales"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Activer toutes les notifications"})]}),e.jsx(P,{id:"notifications",checked:d.notifications,onCheckedChange:t=>m({...d,notifications:t})})]}),e.jsx(L,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(j,{htmlFor:"email-notifications",children:"Notifications email"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recevoir des emails"})]}),e.jsx(P,{id:"email-notifications",checked:d.emailNotifications,onCheckedChange:t=>m({...d,emailNotifications:t})})]}),e.jsx(L,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(j,{htmlFor:"push-notifications",children:"Notifications push"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Notifications sur votre appareil"})]}),e.jsx(P,{id:"push-notifications",checked:d.pushNotifications,onCheckedChange:t=>m({...d,pushNotifications:t})})]})]})]}),e.jsxs(g,{className:"shadow-md",children:[e.jsx(S,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-primary"}),"Préférences"]})}),e.jsx(v,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(j,{htmlFor:"dark-mode",children:"Mode sombre"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Activer le thème sombre"})]}),e.jsx(P,{id:"dark-mode",checked:d.darkMode,onCheckedChange:t=>m({...d,darkMode:t})})]})})]}),e.jsxs(g,{className:"shadow-md",children:[e.jsx(S,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5 text-primary"}),"Sécurité"]})}),e.jsxs(v,{className:"space-y-3",children:[e.jsxs(x,{variant:"outline",className:"w-full justify-start",onClick:()=>{y.info("Changement de mot de passe à venir")},children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Changer le mot de passe"]}),e.jsxs(x,{variant:"outline",className:"w-full justify-start",onClick:()=>{y.info("Authentification à deux facteurs à venir")},children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Authentification à deux facteurs"]})]})]}),e.jsxs(g,{className:"shadow-md",children:[e.jsx(S,{children:e.jsx(M,{children:"Autres"})}),e.jsxs(v,{className:"space-y-3",children:[e.jsxs(x,{variant:"outline",className:"w-full justify-start",onClick:()=>{y.info("Aide et support à venir")},children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Aide et support"]}),e.jsxs(x,{variant:"outline",className:"w-full justify-start",onClick:()=>{y.info("Conditions d'utilisation à venir")},children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Conditions d'utilisation"]})]})]}),e.jsx(g,{className:"shadow-md border-destructive/20",children:e.jsx(v,{className:"p-6",children:e.jsxs(x,{variant:"destructive",className:"w-full",onClick:b,children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Se déconnecter"]})})})]}):null}export{He as default};
