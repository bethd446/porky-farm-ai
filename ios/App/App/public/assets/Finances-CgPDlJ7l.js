import{j as e}from"./ui-vendor-D2IXE4bY.js";import{r as i,k as pe}from"./react-vendor-XYDEKuIS.js";import{g as z,C as w,e as D,i as j,W as oe,l as T,D as je,w as fe,B as k,x as ge,y as se,o as R,L as ve,f as N,u as ye,s as A,b as H,c as U,d as $}from"./index-0hnW3E_C.js";import{L as S,I as J}from"./label-DZSOZ5Rh.js";import{S as _,a as q,b as P,c as V,d as g,T as Ne}from"./textarea-VNbvqAuD.js";import{b as v,T as K,a as E}from"./formatters-CvFiryGg.js";import{F as Q,D as be,a as we,b as De,c as Ce,d as Se,S as Te}from"./dialog-CysqS_ro.js";import{b as ke,c as te,h as L}from"./haptic-feedback-C7ikSRXG.js";import{o as Fe,e as Me,n as Ae,s as G}from"./types-rH0z_lOS.js";import{P as Ee}from"./plus-DXm5Jimi.js";import{R as re,B as Le,C as Re,X as _e,Y as qe,T as ae,d as Pe,e as ne,P as Ve,f as ze,g as Oe}from"./chart-vendor-CZvqwiTC.js";import"./supabase-vendor-DBhEyip2.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=z("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=z("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=z("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),He=i.memo(function({income:p,expenses:f,balance:c,incomeChange:d,expensesChange:a,balanceChange:n}){return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(w,{className:"relative overflow-hidden border-2 border-success/20 bg-gradient-to-br from-success/5 to-success/10 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Revenus"}),e.jsxs("p",{className:"text-3xl font-bold text-success",children:[v(p),e.jsx("span",{className:"text-lg font-normal text-muted-foreground ml-1",children:"FCFA"})]})]}),e.jsx("div",{className:"h-14 w-14 rounded-xl bg-success/20 flex items-center justify-center",children:e.jsx(X,{className:"h-7 w-7 text-success"})})]}),d!==void 0&&e.jsxs("div",{className:j("flex items-center gap-1.5 text-sm font-semibold",d>=0?"text-success":"text-destructive"),children:[d>=0?e.jsx(K,{className:"h-4 w-4"}):e.jsx(E,{className:"h-4 w-4"}),e.jsxs("span",{children:[d>=0?"+":"",d,"%"]}),e.jsx("span",{className:"text-muted-foreground font-normal",children:"vs mois dernier"})]})]})}),e.jsx(w,{className:"relative overflow-hidden border-2 border-revenue/20 bg-gradient-to-br from-revenue/5 to-revenue/10 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Dépenses"}),e.jsxs("p",{className:"text-3xl font-bold text-revenue",children:[v(f),e.jsx("span",{className:"text-lg font-normal text-muted-foreground ml-1",children:"FCFA"})]})]}),e.jsx("div",{className:"h-14 w-14 rounded-xl bg-revenue/20 flex items-center justify-center",children:e.jsx(W,{className:"h-7 w-7 text-revenue"})})]}),a!==void 0&&e.jsxs("div",{className:j("flex items-center gap-1.5 text-sm font-semibold",a<=0?"text-success":"text-destructive"),children:[a<=0?e.jsx(E,{className:"h-4 w-4"}):e.jsx(K,{className:"h-4 w-4"}),e.jsxs("span",{children:[a>=0?"+":"",a,"%"]}),e.jsx("span",{className:"text-muted-foreground font-normal",children:"vs mois dernier"})]})]})}),e.jsx(w,{className:j("relative overflow-hidden border-2 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",c>=0?"border-success/20 bg-gradient-to-br from-success/5 to-success/10":"border-destructive/20 bg-gradient-to-br from-destructive/5 to-destructive/10"),children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Solde"}),e.jsxs("p",{className:j("text-3xl font-bold",c>=0?"text-success":"text-destructive"),children:[v(c),e.jsx("span",{className:"text-lg font-normal text-muted-foreground ml-1",children:"FCFA"})]})]}),e.jsx("div",{className:j("h-14 w-14 rounded-xl flex items-center justify-center",c>=0?"bg-success/20":"bg-destructive/20"),children:c>=0?e.jsx(oe,{className:"h-7 w-7 text-success"}):e.jsx(E,{className:"h-7 w-7 text-destructive"})})]}),n!==void 0&&e.jsxs("div",{className:j("flex items-center gap-1.5 text-sm font-semibold",n>=0?"text-success":"text-destructive"),children:[n>=0?e.jsx(K,{className:"h-4 w-4"}):e.jsx(E,{className:"h-4 w-4"}),e.jsxs("span",{children:[n>=0?"+":"",n,"%"]}),e.jsx("span",{className:"text-muted-foreground font-normal",children:"vs mois dernier"})]})]})})]})}),Ue=i.memo(function({transactions:p,onEdit:f,onDelete:c}){const d=p.reduce((n,r)=>{const x=T(new Date(r.transaction_date),"yyyy-MM-dd");return n[x]||(n[x]=[]),n[x].push(r),n},{}),a=Object.keys(d).sort((n,r)=>new Date(r).getTime()-new Date(n).getTime());return p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:e.jsx(Q,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("p",{className:"text-lg font-medium text-foreground mb-2",children:"Aucune transaction"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Commencez par ajouter votre première transaction"})]}):e.jsx("div",{className:"space-y-6",children:a.map(n=>{const r=d[n],x=r.reduce((o,y)=>o+(y.type==="income"?y.amount:-y.amount),0);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-px flex-1 bg-border"}),e.jsx("span",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:T(new Date(n),"EEEE d MMMM yyyy",{locale:R})}),e.jsx("div",{className:"h-px flex-1 bg-border"})]}),e.jsxs("span",{className:j("text-sm font-semibold px-2 py-1 rounded",x>=0?"text-success bg-success/10":"text-destructive bg-destructive/10"),children:[x>=0?"+":"",v(x)," FCFA"]})]}),e.jsx("div",{className:"space-y-2",children:r.map(o=>e.jsx("div",{className:j("group flex items-center justify-between p-4 rounded-xl","bg-card border border-border/50","hover:border-primary/50 hover:shadow-md","transition-all duration-200","animate-fade-in"),children:e.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:j("h-12 w-12 rounded-xl flex items-center justify-center flex-shrink-0",o.type==="income"?"bg-success/10 text-success":"bg-revenue/10 text-revenue"),children:o.type==="income"?e.jsx(X,{className:"h-6 w-6"}):e.jsx(W,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-foreground truncate",children:o.description||o.category}),o.category&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-muted text-muted-foreground",children:o.category})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T(new Date(o.transaction_date),"HH:mm",{locale:R})})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsxs("p",{className:j("text-lg font-bold",o.type==="income"?"text-success":"text-revenue"),children:[o.type==="income"?"+":"-",v(o.amount)," FCFA"]}),e.jsxs(je,{children:[e.jsx(fe,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ie,{className:"h-4 w-4"})})}),e.jsxs(ge,{align:"end",children:[f&&e.jsx(se,{onClick:()=>f(o),children:"Modifier"}),c&&e.jsx(se,{onClick:()=>c(o),className:"text-destructive",children:"Supprimer"})]})]})]})]})},o.id))})]},n)})})}),$e=Fe({type:Me(["income","expense"]),amount:Ae().positive("Le montant doit être positif"),description:G().min(3,"La description doit contenir au moins 3 caractères"),category:G().min(1,"La catégorie est requise"),transaction_date:G()});function Ke({open:h,onOpenChange:p,onSubmit:f}){const[c,d]=i.useState(!1),[a,n]=i.useState({}),[r,x]=i.useState({type:"expense",amount:"",description:"",category:"",transaction_date:new Date().toISOString().split("T")[0]}),o={income:["Vente de porcs","Vente de produits","Subventions","Autres revenus"],expense:["Alimentation","Médicaments","Équipement","Maintenance","Transport","Autres dépenses"]},y=async l=>{l.preventDefault(),n({}),d(!0);try{const C=$e.safeParse({type:r.type,amount:parseFloat(r.amount),description:r.description,category:r.category,transaction_date:r.transaction_date});if(!C.success){const M={};C.error.errors.forEach(b=>{b.path[0]&&(M[b.path[0].toString()]=b.message)}),n(M),d(!1),N.error("Veuillez corriger les erreurs dans le formulaire");return}const Y={type:r.type,amount:parseFloat(r.amount),description:r.description,category:r.category,transaction_date:r.transaction_date},{error:F}=await f(Y);d(!1),F?(te(),N.error("Erreur lors de l'ajout de la transaction")):(x({type:"expense",amount:"",description:"",category:"",transaction_date:new Date().toISOString().split("T")[0]}),n({}),p(!1),ke(),N.success("Transaction ajoutée avec succès !"))}catch{d(!1),te(),N.error("Une erreur est survenue")}};return e.jsx(be,{open:h,onOpenChange:p,children:e.jsxs(we,{className:"sm:max-w-md",children:[e.jsxs(De,{children:[e.jsx(Ce,{children:"Nouvelle transaction"}),e.jsx(Se,{children:"Ajoutez une nouvelle transaction à votre registre"})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"type",children:"Type"}),e.jsxs(_,{value:r.type,onValueChange:l=>{x({...r,type:l,category:""}),n({...a,category:""})},children:[e.jsx(q,{children:e.jsx(P,{})}),e.jsxs(V,{children:[e.jsx(g,{value:"income",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4 text-success"}),e.jsx("span",{children:"Revenu"})]})}),e.jsx(g,{value:"expense",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-revenue"}),e.jsx("span",{children:"Dépense"})]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"amount",children:"Montant (FCFA) *"}),e.jsx(J,{id:"amount",type:"number",step:"0.01",placeholder:"Ex: 50000",value:r.amount,onChange:l=>{x({...r,amount:l.target.value}),a.amount&&n({...a,amount:""})},required:!0,className:a.amount?"border-destructive":""}),a.amount&&e.jsx("p",{className:"text-sm text-destructive",children:a.amount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"category",children:"Catégorie *"}),e.jsxs(_,{value:r.category,onValueChange:l=>{x({...r,category:l}),a.category&&n({...a,category:""})},children:[e.jsx(q,{children:e.jsx(P,{placeholder:"Sélectionner une catégorie"})}),e.jsx(V,{children:o[r.type].map(l=>e.jsx(g,{value:l,children:l},l))})]}),a.category&&e.jsx("p",{className:"text-sm text-destructive",children:a.category})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"description",children:"Description *"}),e.jsx(Ne,{id:"description",placeholder:"Description de la transaction...",value:r.description,onChange:l=>{x({...r,description:l.target.value}),a.description&&n({...a,description:""})},required:!0,className:a.description?"border-destructive":"",maxLength:500}),a.description&&e.jsx("p",{className:"text-sm text-destructive",children:a.description}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.description.length,"/500 caractères"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"transaction_date",children:"Date *"}),e.jsx(J,{id:"transaction_date",type:"date",value:r.transaction_date,onChange:l=>x({...r,transaction_date:l.target.value}),required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(k,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Annuler"}),e.jsxs(k,{type:"submit",disabled:c||!r.amount||!r.description||!r.category,children:[c&&e.jsx(ve,{className:"mr-2 h-4 w-4 animate-spin"}),"Ajouter"]})]})]})]})})}const ie=["hsl(142, 71%, 45%)","hsl(340, 82%, 52%)","hsl(38, 92%, 50%)","hsl(217, 91%, 60%)","hsl(215, 16%, 47%)"];function ns(){const{user:h}=ye(),[p,f]=pe(),[c,d]=i.useState([]),[a,n]=i.useState([]),[r,x]=i.useState("month"),[o,y]=i.useState(""),[l,C]=i.useState("all"),[Y,F]=i.useState(!0),[M,b]=i.useState(p.get("action")==="sale"||p.get("action")==="add");i.useEffect(()=>{(async()=>{if(h)try{F(!0);const{data:t,error:m}=await A.from("transactions").select("*").eq("user_id",h.id).order("transaction_date",{ascending:!1});if(m)throw m;d(t||[]),n(t||[])}catch(t){console.error("Error fetching transactions:",t)}finally{F(!1)}})()},[h]),i.useEffect(()=>{let s=[...c];if(l!=="all"&&(s=s.filter(t=>t.type===l)),o){const t=o.toLowerCase();s=s.filter(m=>{var u,ee;return((u=m.description)==null?void 0:u.toLowerCase().includes(t))||((ee=m.category)==null?void 0:ee.toLowerCase().includes(t))||v(m.amount).includes(t)})}n(s)},[c,l,o]);const O=i.useMemo(()=>c.filter(s=>s.type==="income").reduce((s,t)=>s+t.amount,0),[c]),B=i.useMemo(()=>c.filter(s=>s.type==="expense").reduce((s,t)=>s+t.amount,0),[c]),ce=i.useMemo(()=>O-B,[O,B]),le=i.useMemo(()=>8,[]),de=i.useMemo(()=>-3,[]),me=i.useMemo(()=>12,[]),Z=i.useMemo(()=>c.filter(s=>s.type==="expense").reduce((s,t)=>(s[t.category]=(s[t.category]||0)+t.amount,s),{}),[c]),I=i.useMemo(()=>Object.entries(Z).map(([s,t])=>({name:s,value:t})),[Z]),xe=i.useMemo(()=>[{month:"Jan",revenus:18e5,depenses:65e4},{month:"Fév",revenus:21e5,depenses:72e4},{month:"Mar",revenus:195e4,depenses:68e4},{month:"Avr",revenus:24e5,depenses:85e4},{month:"Mai",revenus:22e5,depenses:78e4},{month:"Juin",revenus:26e5,depenses:9e5}],[]);i.useCallback(s=>v(s),[]);const ue=i.useCallback(async s=>{if(!h)return{error:new Error("Non authentifié")};try{const{error:t}=await A.from("transactions").insert([{...s,user_id:h.id}]);if(t)throw t;const{data:m}=await A.from("transactions").select("*").eq("user_id",h.id).order("transaction_date",{ascending:!1});return m&&d(m),{error:null}}catch(t){return console.error("Error adding transaction:",t),{error:t}}},[h]),he=i.useCallback(()=>{L();const s=[["Type","Montant","Catégorie","Description","Date"].join(","),...a.map(u=>[u.type==="income"?"Revenu":"Dépense",u.amount,u.category||"",`"${(u.description||"").replace(/"/g,'""')}"`,T(new Date(u.transaction_date),"dd/MM/yyyy",{locale:R})].join(","))].join(`
`),t=new Blob([s],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");m.href=URL.createObjectURL(t),m.download=`transactions-${T(new Date,"yyyy-MM-dd",{locale:R})}.csv`,m.click()},[a]);return e.jsxs("div",{className:"content-area space-y-6 pb-20",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-display font-bold bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent flex items-center gap-3",children:[e.jsx(oe,{className:"h-8 w-8 text-primary"}),"Finances"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos revenus et dépenses de votre élevage"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(k,{variant:"outline",onClick:he,disabled:a.length===0,children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Exporter"]}),e.jsxs(k,{onClick:()=>{L(),b(!0),f({})},children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Transaction"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(J,{placeholder:"Rechercher une transaction...",value:o,onChange:s=>y(s.target.value),className:"pl-10"})]}),e.jsxs(_,{value:l,onValueChange:s=>C(s),children:[e.jsxs(q,{className:"w-40",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),e.jsx(P,{})]}),e.jsxs(V,{children:[e.jsx(g,{value:"all",children:"Tous"}),e.jsx(g,{value:"income",children:"Revenus"}),e.jsx(g,{value:"expense",children:"Dépenses"})]})]}),e.jsxs(_,{value:r,onValueChange:x,children:[e.jsx(q,{className:"w-40",children:e.jsx(P,{})}),e.jsxs(V,{children:[e.jsx(g,{value:"week",children:"Cette semaine"}),e.jsx(g,{value:"month",children:"Ce mois"}),e.jsx(g,{value:"year",children:"Cette année"})]})]})]})]}),e.jsx(He,{income:O,expenses:B,balance:ce,incomeChange:le,expensesChange:de,balanceChange:me}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(w,{className:"shadow-lg border-border/50 hover:shadow-xl transition-shadow duration-300",children:[e.jsxs(H,{children:[e.jsx(U,{children:"Évolution mensuelle"}),e.jsx($,{children:"Revenus et dépenses sur 6 mois"})]}),e.jsx(D,{children:e.jsx("div",{className:"h-80",children:e.jsx(re,{width:"100%",height:"100%",children:e.jsxs(Le,{data:xe,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(Re,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.5}),e.jsx(_e,{dataKey:"month",tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},axisLine:{stroke:"hsl(var(--border))"}}),e.jsx(qe,{tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},axisLine:{stroke:"hsl(var(--border))"}}),e.jsx(ae,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:s=>[v(s)+" FCFA",""]}),e.jsx(Pe,{}),e.jsx(ne,{dataKey:"revenus",fill:"hsl(var(--success))",radius:[8,8,0,0],name:"Revenus"}),e.jsx(ne,{dataKey:"depenses",fill:"hsl(var(--revenue))",radius:[8,8,0,0],name:"Dépenses"})]})})})})]}),e.jsxs(w,{className:"shadow-lg border-border/50 hover:shadow-xl transition-shadow duration-300",children:[e.jsxs(H,{children:[e.jsx(U,{children:"Répartition des dépenses"}),e.jsx($,{children:"Par catégorie"})]}),e.jsx(D,{children:e.jsx("div",{className:"h-80",children:I.length>0?e.jsx(re,{width:"100%",height:"100%",children:e.jsxs(Ve,{children:[e.jsx(ze,{data:I,cx:"50%",cy:"50%",innerRadius:70,outerRadius:110,paddingAngle:3,dataKey:"value",label:({name:s,percent:t})=>`${s} ${(t*100).toFixed(0)}%`,children:I.map((s,t)=>e.jsx(Oe,{fill:ie[t%ie.length]},`cell-${t}`))}),e.jsx(ae,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:s=>[v(s)+" FCFA",""]})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground",children:[e.jsx(Q,{className:"h-12 w-12 mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Aucune donnée"}),e.jsx("p",{className:"text-sm",children:"Ajoutez des transactions pour voir les statistiques"})]})})})]})]}),e.jsxs(w,{className:"shadow-lg border-border/50",children:[e.jsx(H,{className:"flex flex-row items-center justify-between",children:e.jsxs("div",{children:[e.jsx(U,{children:"Transactions"}),e.jsxs($,{children:[a.length," transaction",a.length>1?"s":""," trouvée",a.length>1?"s":""]})]})}),e.jsx(D,{children:e.jsx(Ue,{transactions:a,onEdit:s=>{L(),N.info("Édition de transaction à venir")},onDelete:async s=>{if(L(),confirm("Êtes-vous sûr de vouloir supprimer cette transaction ?"))try{const{error:t}=await A.from("transactions").delete().eq("id",s.id);if(t)throw t;d(m=>m.filter(u=>u.id!==s.id)),n(m=>m.filter(u=>u.id!==s.id)),N.success("Transaction supprimée")}catch(t){console.error("Error deleting transaction:",t),N.error("Erreur lors de la suppression")}}})})]}),e.jsx(Ke,{open:M,onOpenChange:s=>{b(s),s||f({})},onSubmit:ue})]})}export{ns as default};
