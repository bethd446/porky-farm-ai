{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/desk/Desktop/PorcPro/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,+LAAO,EAAC,IAAA,sKAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/desk/Desktop/PorcPro/components/dashboard/dashboard-sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport Link from \"next/link\"\nimport { usePathname } from 'next/navigation'\nimport { cn } from \"@/lib/utils\"\nimport { supabase } from \"@/lib/supabase/client\"\nimport { LayoutDashboard, PiggyBank, Stethoscope, Baby, Calculator, Brain, User, Settings, LogOut, Menu, X, ChevronDown, Loader2 } from 'lucide-react'\n\nconst menuItems = [\n  {\n    label: \"Tableau de bord\",\n    icon: LayoutDashboard,\n    href: \"/dashboard\",\n  },\n  {\n    label: \"Cheptel\",\n    icon: PiggyBank,\n    href: \"/dashboard/livestock\",\n    submenu: [\n      { label: \"Tous les animaux\", href: \"/dashboard/livestock\" },\n      { label: \"Truies\", href: \"/dashboard/livestock/sows\" },\n      { label: \"Verrats\", href: \"/dashboard/livestock/boars\" },\n      { label: \"Porcelets\", href: \"/dashboard/livestock/piglets\" },\n    ],\n  },\n  {\n    label: \"Santé & Vétérinaire\",\n    icon: Stethoscope,\n    href: \"/dashboard/health\",\n  },\n  {\n    label: \"Reproduction\",\n    icon: Baby,\n    href: \"/dashboard/reproduction\",\n  },\n  {\n    label: \"Alimentation\",\n    icon: Calculator,\n    href: \"/dashboard/feeding\",\n  },\n  {\n    label: \"Assistant IA\",\n    icon: Brain,\n    href: \"/dashboard/ai-assistant\",\n  },\n  {\n    label: \"Profil\",\n    icon: User,\n    href: \"/dashboard/profile\",\n  },\n  {\n    label: \"Paramètres\",\n    icon: Settings,\n    href: \"/dashboard/settings\",\n  },\n]\n\nexport function DashboardSidebar() {\n  const pathname = usePathname()\n  const [mobileOpen, setMobileOpen] = useState(false)\n  const [expandedItem, setExpandedItem] = useState<string | null>(null)\n  const [isLoggingOut, setIsLoggingOut] = useState(false)\n\n  const handleLogout = async () => {\n    setIsLoggingOut(true)\n    try {\n      await supabase.auth.signOut()\n      window.location.href = \"/\"\n    } catch (error) {\n      console.error(\"Logout error:\", error)\n    } finally {\n      setIsLoggingOut(false)\n    }\n  }\n\n  const SidebarContent = () => (\n    <>\n      {/* Logo */}\n      <div className=\"flex h-16 items-center gap-2 border-b border-border px-6\">\n        <div className=\"flex h-9 w-9 items-center justify-center rounded-xl bg-primary\">\n          <svg viewBox=\"0 0 24 24\" className=\"h-5 w-5 text-primary-foreground\" fill=\"currentColor\">\n            <path d=\"M12 2C8.5 2 5.5 4.5 5.5 8c0 2.5 1.5 4.5 3.5 5.5v2c0 .5.5 1 1 1h4c.5 0 1-.5 1-1v-2c2-1 3.5-3 3.5-5.5 0-3.5-3-6-6.5-6z\" />\n            <circle cx=\"9\" cy=\"7\" r=\"1.5\" />\n            <circle cx=\"15\" cy=\"7\" r=\"1.5\" />\n            <path d=\"M10 10h4c0 1-1 2-2 2s-2-1-2-2z\" />\n          </svg>\n        </div>\n        <span className=\"text-lg font-bold text-foreground\">PorkyFarm</span>\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"flex-1 space-y-1 overflow-y-auto p-4\">\n        {menuItems.map((item) => {\n          const isActive = pathname === item.href || pathname.startsWith(item.href + \"/\")\n          const hasSubmenu = item.submenu && item.submenu.length > 0\n          const isExpanded = expandedItem === item.label\n\n          return (\n            <div key={item.label}>\n              <Link\n                href={item.href}\n                onClick={(e) => {\n                  if (hasSubmenu) {\n                    // Toggle submenu but also allow navigation\n                    setExpandedItem(isExpanded ? null : item.label)\n                  }\n                  setMobileOpen(false)\n                }}\n                className={cn(\n                  \"flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-medium transition-colors\",\n                  isActive ? \"bg-primary text-white\" : \"text-muted-foreground hover:bg-muted hover:text-foreground\",\n                )}\n              >\n                <item.icon className=\"h-5 w-5\" />\n                <span className=\"flex-1\">{item.label}</span>\n                {hasSubmenu && (\n                  <ChevronDown \n                    className={cn(\"h-4 w-4 transition-transform\", isExpanded && \"rotate-180\")} \n                    onClick={(e) => {\n                      e.preventDefault()\n                      e.stopPropagation()\n                      setExpandedItem(isExpanded ? null : item.label)\n                    }}\n                  />\n                )}\n              </Link>\n\n              {hasSubmenu && isExpanded && (\n                <div className=\"ml-8 mt-1 space-y-1\">\n                  {item.submenu.map((sub) => (\n                    <Link\n                      key={sub.href}\n                      href={sub.href}\n                      onClick={() => setMobileOpen(false)}\n                      className={cn(\n                        \"block rounded-lg px-4 py-2 text-sm transition-colors\",\n                        pathname === sub.href\n                          ? \"bg-primary/10 text-primary\"\n                          : \"text-muted-foreground hover:bg-muted hover:text-foreground\",\n                      )}\n                    >\n                      {sub.label}\n                    </Link>\n                  ))}\n                </div>\n              )}\n            </div>\n          )\n        })}\n      </nav>\n\n      {/* Logout */}\n      <div className=\"border-t border-border p-4\">\n        <button\n          onClick={handleLogout}\n          disabled={isLoggingOut}\n          className=\"flex w-full items-center gap-3 rounded-xl px-4 py-3 text-sm font-medium text-destructive transition-colors hover:bg-destructive/10 disabled:opacity-50\"\n        >\n          {isLoggingOut ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <LogOut className=\"h-5 w-5\" />}\n          {isLoggingOut ? \"Déconnexion...\" : \"Déconnexion\"}\n        </button>\n      </div>\n    </>\n  )\n\n  return (\n    <>\n      {/* Mobile Menu Button */}\n      <button\n        className=\"fixed left-4 top-4 z-50 rounded-xl bg-card p-2 shadow-md md:hidden\"\n        onClick={() => setMobileOpen(!mobileOpen)}\n      >\n        {mobileOpen ? <X className=\"h-6 w-6\" /> : <Menu className=\"h-6 w-6\" />}\n      </button>\n\n      {/* Mobile Sidebar */}\n      {mobileOpen && (\n        <div className=\"fixed inset-0 z-40 md:hidden\">\n          <div className=\"absolute inset-0 bg-black/50\" onClick={() => setMobileOpen(false)} />\n          <aside className=\"absolute left-0 top-0 flex h-full w-64 flex-col bg-card shadow-lg\">\n            <SidebarContent />\n          </aside>\n        </div>\n      )}\n\n      {/* Desktop Sidebar */}\n      <aside className=\"fixed left-0 top-0 hidden h-screen w-64 flex-col border-r border-border bg-card md:flex\">\n        <SidebarContent />\n      </aside>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 397, "column": 0}, "map": {"version":3,"sources":["file:///Users/desk/Desktop/PorcPro/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,mNAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,2IAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 428, "column": 0}, "map": {"version":3,"sources":["file:///Users/desk/Desktop/PorcPro/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,gMAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,iMAAI,GAAG;IAE9B,qBACE,mNAAC;QACC,aAAU;QACV,WAAW,IAAA,2IAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 493, "column": 0}, "map": {"version":3,"sources":["file:///Users/desk/Desktop/PorcPro/components/dashboard/dashboard-header.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport Link from \"next/link\"\nimport { Bell, Search, Sun, Cloud, CloudRain, MapPin } from \"lucide-react\"\nimport { Input } from \"@/components/ui/input\"\nimport { Button } from \"@/components/ui/button\"\nimport { useAuthContext } from \"@/contexts/auth-context\"\nimport { NotificationsDialog } from \"./notifications-dialog\"\n\nexport function DashboardHeader() {\n  const { profile } = useAuthContext()\n  const [notificationsOpen, setNotificationsOpen] = useState(false)\n  const [weather, setWeather] = useState({\n    temp: 28,\n    condition: \"sunny\",\n    humidity: 65,\n    location: \"Abidjan, CI\",\n  })\n  const [currentTime, setCurrentTime] = useState(new Date())\n\n  useEffect(() => {\n    const timer = setInterval(() => setCurrentTime(new Date()), 60000)\n    return () => clearInterval(timer)\n  }, [])\n\n  const getWeatherIcon = () => {\n    switch (weather.condition) {\n      case \"sunny\":\n        return <Sun className=\"h-5 w-5 text-amber-500\" />\n      case \"cloudy\":\n        return <Cloud className=\"h-5 w-5 text-gray-500\" />\n      case \"rainy\":\n        return <CloudRain className=\"h-5 w-5 text-blue-500\" />\n      default:\n        return <Sun className=\"h-5 w-5 text-amber-500\" />\n    }\n  }\n\n  const firstName = profile?.full_name?.split(\" \")[0] || \"Utilisateur\"\n\n  return (\n    <header className=\"sticky top-0 z-30 flex h-16 items-center justify-between border-b border-border bg-card/95 px-4 backdrop-blur supports-[backdrop-filter]:bg-card/60 md:px-6\">\n      <div className=\"flex items-center gap-4\">\n        <div className=\"ml-12 md:ml-0\">\n          <p className=\"text-sm text-muted-foreground\">\n            {currentTime.toLocaleDateString(\"fr-FR\", {\n              weekday: \"long\",\n              day: \"numeric\",\n              month: \"long\",\n            })}\n          </p>\n          <h2 className=\"text-lg font-semibold text-foreground\">Bonjour, {firstName}</h2>\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-3\">\n        {/* Weather Widget */}\n        <div className=\"hidden items-center gap-2 rounded-full bg-muted px-4 py-2 lg:flex\">\n          {getWeatherIcon()}\n          <span className=\"text-sm font-medium\">{weather.temp}°C</span>\n          <div className=\"h-4 w-px bg-border\" />\n          <MapPin className=\"h-3 w-3 text-muted-foreground\" />\n          <span className=\"text-xs text-muted-foreground\">{weather.location}</span>\n        </div>\n\n        {/* Search */}\n        <div className=\"relative hidden md:block\">\n          <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\n          <Input placeholder=\"Rechercher...\" className=\"h-10 w-56 rounded-full border-muted bg-muted pl-10\" />\n        </div>\n\n        {/* Notifications */}\n        <Button \n          variant=\"ghost\" \n          size=\"icon\" \n          className=\"relative rounded-full\"\n          onClick={() => setNotificationsOpen(true)}\n        >\n          <Bell className=\"h-5 w-5\" />\n          <span className=\"absolute right-1 top-1 flex h-4 w-4 items-center justify-center rounded-full bg-destructive text-[10px] font-medium text-white\">\n            3\n          </span>\n        </Button>\n\n        {/* Profile */}\n        <Link href=\"/dashboard/profile\">\n          <button className=\"flex items-center gap-2 rounded-full p-1 transition hover:bg-muted\">\n            <div className=\"flex h-9 w-9 items-center justify-center rounded-full bg-primary text-sm font-medium text-primary-foreground\">\n              {firstName.charAt(0).toUpperCase()}\n            </div>\n          </button>\n        </Link>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;AAPA;;;;;;;AAUO,SAAS;;IACd,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,uKAAc;IAClC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,+LAAQ,EAAC;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+LAAQ,EAAC;QACrC,MAAM;QACN,WAAW;QACX,UAAU;QACV,UAAU;IACZ;IACA,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,+LAAQ,EAAC,IAAI;IAEnD,IAAA,gMAAS;qCAAC;YACR,MAAM,QAAQ;mDAAY,IAAM,eAAe,IAAI;kDAAS;YAC5D;6CAAO,IAAM,cAAc;;QAC7B;oCAAG,EAAE;IAEL,MAAM,iBAAiB;QACrB,OAAQ,QAAQ,SAAS;YACvB,KAAK;gBACH,qBAAO,mNAAC,gOAAG;oBAAC,WAAU;;;;;;YACxB,KAAK;gBACH,qBAAO,mNAAC,sOAAK;oBAAC,WAAU;;;;;;YAC1B,KAAK;gBACH,qBAAO,mNAAC,sPAAS;oBAAC,WAAU;;;;;;YAC9B;gBACE,qBAAO,mNAAC,gOAAG;oBAAC,WAAU;;;;;;QAC1B;IACF;IAEA,MAAM,YAAY,SAAS,WAAW,MAAM,IAAI,CAAC,EAAE,IAAI;IAEvD,qBACE,mNAAC;QAAO,WAAU;;0BAChB,mNAAC;gBAAI,WAAU;0BACb,cAAA,mNAAC;oBAAI,WAAU;;sCACb,mNAAC;4BAAE,WAAU;sCACV,YAAY,kBAAkB,CAAC,SAAS;gCACvC,SAAS;gCACT,KAAK;gCACL,OAAO;4BACT;;;;;;sCAEF,mNAAC;4BAAG,WAAU;;gCAAwC;gCAAU;;;;;;;;;;;;;;;;;;0BAIpE,mNAAC;gBAAI,WAAU;;kCAEb,mNAAC;wBAAI,WAAU;;4BACZ;0CACD,mNAAC;gCAAK,WAAU;;oCAAuB,QAAQ,IAAI;oCAAC;;;;;;;0CACpD,mNAAC;gCAAI,WAAU;;;;;;0CACf,mNAAC,6OAAM;gCAAC,WAAU;;;;;;0CAClB,mNAAC;gCAAK,WAAU;0CAAiC,QAAQ,QAAQ;;;;;;;;;;;;kCAInE,mNAAC;wBAAI,WAAU;;0CACb,mNAAC,yOAAM;gCAAC,WAAU;;;;;;0CAClB,mNAAC,4JAAK;gCAAC,aAAY;gCAAgB,WAAU;;;;;;;;;;;;kCAI/C,mNAAC,8JAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,WAAU;wBACV,SAAS,IAAM,qBAAqB;;0CAEpC,mNAAC,mOAAI;gCAAC,WAAU;;;;;;0CAChB,mNAAC;gCAAK,WAAU;0CAAiI;;;;;;;;;;;;kCAMnJ,mNAAC,gMAAI;wBAAC,MAAK;kCACT,cAAA,mNAAC;4BAAO,WAAU;sCAChB,cAAA,mNAAC;gCAAI,WAAU;0CACZ,UAAU,MAAM,CAAC,GAAG,WAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9C;GAtFgB;;QACM,uKAAc;;;KADpB"}},
    {"offset": {"line": 765, "column": 0}, "map": {"version":3,"sources":["file:///Users/desk/Desktop/PorcPro/app/dashboard/layout.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { DashboardSidebar } from \"@/components/dashboard/dashboard-sidebar\"\nimport { DashboardHeader } from \"@/components/dashboard/dashboard-header\"\nimport { supabase } from \"@/lib/supabase/client\"\nimport { Loader2 } from \"lucide-react\"\n\nexport default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const [isLoading, setIsLoading] = useState(true)\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const router = useRouter()\n\n  useEffect(() => {\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((event, session) => {\n      console.log(\"[v0] Auth state changed:\", event, session ? \"has session\" : \"no session\")\n\n      if (session) {\n        setIsAuthenticated(true)\n        setIsLoading(false)\n      } else if (event === \"SIGNED_OUT\" || (event === \"TOKEN_REFRESHED\" && !session)) {\n        router.push(\"/auth/login\")\n      }\n    })\n\n    // Check initial session\n    const checkInitialSession = async () => {\n      const {\n        data: { session },\n      } = await supabase.auth.getSession()\n      console.log(\"[v0] Initial session check:\", session ? \"authenticated\" : \"not authenticated\")\n\n      if (session) {\n        setIsAuthenticated(true)\n        setIsLoading(false)\n      } else {\n        // Wait a bit for session to be restored from storage\n        setTimeout(async () => {\n          const {\n            data: { session: retrySession },\n          } = await supabase.auth.getSession()\n          if (retrySession) {\n            setIsAuthenticated(true)\n            setIsLoading(false)\n          } else {\n            router.push(\"/auth/login\")\n          }\n        }, 500)\n      }\n    }\n\n    checkInitialSession()\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [router])\n\n  if (isLoading) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center bg-muted/30\">\n        <div className=\"flex flex-col items-center gap-4\">\n          <Loader2 className=\"h-10 w-10 animate-spin text-primary\" />\n          <p className=\"text-muted-foreground\">Chargement du tableau de bord...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (!isAuthenticated) {\n    return null\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-muted/30\">\n      <DashboardSidebar />\n      <div className=\"flex flex-1 flex-col md:ml-64\">\n        <DashboardHeader />\n        <main className=\"flex-1 p-4 md:p-6\">{children}</main>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AARA;;;;;;;AAUe,SAAS,gBAAgB,EACtC,QAAQ,EAGT;;IACC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+LAAQ,EAAC;IAC3C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,+LAAQ,EAAC;IACvD,MAAM,SAAS,IAAA,wKAAS;IAExB,IAAA,gMAAS;qCAAC;YACR,MAAM,EACJ,MAAM,EAAE,YAAY,EAAE,EACvB,GAAG,8JAAQ,CAAC,IAAI,CAAC,iBAAiB;6CAAC,CAAC,OAAO;oBAC1C,QAAQ,GAAG,CAAC,4BAA4B,OAAO,UAAU,gBAAgB;oBAEzE,IAAI,SAAS;wBACX,mBAAmB;wBACnB,aAAa;oBACf,OAAO,IAAI,UAAU,gBAAiB,UAAU,qBAAqB,CAAC,SAAU;wBAC9E,OAAO,IAAI,CAAC;oBACd;gBACF;;YAEA,wBAAwB;YACxB,MAAM;iEAAsB;oBAC1B,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EAClB,GAAG,MAAM,8JAAQ,CAAC,IAAI,CAAC,UAAU;oBAClC,QAAQ,GAAG,CAAC,+BAA+B,UAAU,kBAAkB;oBAEvE,IAAI,SAAS;wBACX,mBAAmB;wBACnB,aAAa;oBACf,OAAO;wBACL,qDAAqD;wBACrD;6EAAW;gCACT,MAAM,EACJ,MAAM,EAAE,SAAS,YAAY,EAAE,EAChC,GAAG,MAAM,8JAAQ,CAAC,IAAI,CAAC,UAAU;gCAClC,IAAI,cAAc;oCAChB,mBAAmB;oCACnB,aAAa;gCACf,OAAO;oCACL,OAAO,IAAI,CAAC;gCACd;4BACF;4EAAG;oBACL;gBACF;;YAEA;YAEA;6CAAO;oBACL,aAAa,WAAW;gBAC1B;;QACF;oCAAG;QAAC;KAAO;IAEX,IAAI,WAAW;QACb,qBACE,mNAAC;YAAI,WAAU;sBACb,cAAA,mNAAC;gBAAI,WAAU;;kCACb,mNAAC,qPAAO;wBAAC,WAAU;;;;;;kCACnB,mNAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;IAI7C;IAEA,IAAI,CAAC,iBAAiB;QACpB,OAAO;IACT;IAEA,qBACE,mNAAC;QAAI,WAAU;;0BACb,mNAAC,6LAAgB;;;;;0BACjB,mNAAC;gBAAI,WAAU;;kCACb,mNAAC,2LAAe;;;;;kCAChB,mNAAC;wBAAK,WAAU;kCAAqB;;;;;;;;;;;;;;;;;;AAI7C;GAhFwB;;QAOP,wKAAS;;;KAPF"}}]
}